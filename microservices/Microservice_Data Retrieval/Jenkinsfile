pipeline {
    agent any
    stages {
        stage('Installing dependencies') {
            steps {                 
                sh '''
                    echo 'Start installing dependencies'
                    echo 'pip version'
                    python3 -m pip --version
                    python3 -m pip install --upgrade setuptools
                    python3 -m pip install -r "microservices/Microservice_Data Retrieval/requirements.txt"
                    '''
             }
        }         
        stage('Running test cases') {
            steps {                 
                sh '''
                   echo 'Start running test cases'
                    python3 "microservices/Microservice_Data Retrieval/app/tests/test.py"
                  '''
             }
        }
        stage('Deploy') {
            steps {
            sh '''
                #cd dir/200-ok/flask-api/
                #git pull
                #git checkout develop
                cd "microservices/Microservice_Data Retrieval"
                docker build -t dataretrieval-service .
                #docker login
                #docker tag flask-service 200okdocker/flask-service
                #docker push 200okdocker/flask-service
            '''    
            }
        }
    }
}
