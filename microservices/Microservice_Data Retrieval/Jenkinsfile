pipeline {
    agent any
    stages {
        stage('Prepare environment') {
            steps {                 
                sh '''
                    echo 'Start installing dependencies'
                    pip3 install -r "microservices/Microservice_Data Retrieval/requirements.txt"
                    echo 'Start running test cases'
                    sudo python3 "microservices/Microservice_Data Retrieval/app/tests/test.py"
                '''    
             }
        }
        stage('Deploy') {
            steps {
            sh '''
                #cd dir/200-ok/flask-api/
                #git pull
                #git checkout develop
                cd "microservices/Microservice_Data Retrieval"
                docker build -t dataretrieval-service .
                #docker login
                #docker tag flask-service 200okdocker/flask-service
                #docker push 200okdocker/flask-service
            '''    
            }
        }
    }
}
